// Code generated by ffire. DO NOT EDIT.

package person

import (
	"bytes"
)

type PersonMessage struct {
	Name string
	Age  int32
}

// EncodePersonMessage encodes PersonMessage to binary wire format.
func EncodePersonMessage(v PersonMessage) []byte {
	buf := &bytes.Buffer{}
	{
		l := uint16(len(v.Name))
		buf.WriteByte(byte(l))
		buf.WriteByte(byte(l >> 8))
	}
	buf.WriteString(v.Name)
	{
		v := uint32(v.Age)
		buf.WriteByte(byte(v))
		buf.WriteByte(byte(v >> 8))
		buf.WriteByte(byte(v >> 16))
		buf.WriteByte(byte(v >> 24))
	}
	return buf.Bytes()
}

// DecodePersonMessage decodes Person from binary wire format.
func DecodePersonMessage(data []byte) (PersonMessage, error) {
	var (
		result PersonMessage
		pos    int
	)
	length1 := uint16(data[pos]) | uint16(data[pos+1])<<8
	pos += 2
	result.Name = string(data[pos : pos+int(length1)])
	pos += int(length1)
	result.Age = int32(uint32(data[pos]) | uint32(data[pos+1])<<8 | uint32(data[pos+2])<<16 | uint32(data[pos+3])<<24)
	pos += 4
	return result, nil
}
