# test - FFire Swift Bindings

Swift bindings for the test schema, generated by [FFire](https://github.com/shaban/ffire).

## Installation

### Swift Package Manager

Add this package as a dependency in your Package.swift:

```swift
dependencies: [
    .package(path: "dist/swift")
]
```

## Usage

```swift
import test
import Foundation

// Decode from binary data
let data = Data(/* your binary data */)

do {
    let msg = try Message.decode(data)
    
    // Encode back to binary
    let encoded = try msg.encode()
    
    // Resources are automatically freed when msg goes out of scope
} catch let error as FFireError {
    print("FFire error: \(error)")
} catch {
    print("Unexpected error: \(error)")
}
```

## API

### `Message`

**`static func decode(_ data: Data) throws -> Message`**

Decode a `Message` from binary data.

- **Parameter data:** Binary data (Data)
- **Returns:** `Message` object
- **Throws:** `FFireError` if decoding fails

**`func encode() throws -> Data`**

Encode this `Message` to binary data.

- **Returns:** Binary data (Data)
- **Throws:** `FFireError` if encoding fails

**`func free()`**

Manually free the native resources. Called automatically by `deinit`.

## Error Handling

The library uses Swift's error handling with the `FFireError` enum:

- `FFireError.decodeFailed(String)` - Decoding failed with error message
- `FFireError.encodeFailed(String)` - Encoding failed with error message
- `FFireError.libraryError(String)` - General library error

## Platform Support

This package supports:

- macOS 10.15+
- iOS 13+
- tvOS 13+
- watchOS 6+

The correct library is automatically loaded based on your platform:

- macOS: `libffire.dylib`
- Linux: `libffire.so`
- Windows: `ffire.dll`

## Memory Management

Resources are automatically freed when objects are deallocated thanks to Swift's ARC and the `deinit` method. You can also manually call `free()` if needed.

## License

Generated by FFire. See your schema's license for terms.
