# test - FFire Java Bindings

Java bindings for the test schema, generated by [FFire](https://github.com/shaban/ffire).

## Requirements

- Java 8 or higher
- Maven 3.x
- Native library (libffire.so/dylib/dll) must be accessible

## Installation

### Build with Maven

```bash
cd java
mvn clean install
```

### Running with Native Library

The native library must be in your `java.library.path`:

```bash
java -Djava.library.path=/path/to/lib -jar your-app.jar
```

Or copy the library to a system library path:
- **macOS**: `/usr/local/lib/`
- **Linux**: `/usr/lib/` or `/usr/local/lib/`
- **Windows**: System PATH

## Usage

```java
import com.ffire.test.Message;
import com.ffire.test.FFireException;
import java.nio.file.Files;
import java.nio.file.Paths;

public class Example {
    public static void main(String[] args) {
        try {
            // Decode from binary
            byte[] data = Files.readAllBytes(Paths.get("data.bin"));
            Message msg = Message.decode(data);

            // Encode back to binary
            byte[] encoded = msg.encode();

            // Free resources
            msg.free();

            // Or use try-with-resources (implements AutoCloseable)
            try (Message msg2 = Message.decode(data)) {
                byte[] encoded2 = msg2.encode();
            }
        } catch (FFireException e) {
            System.err.println("FFire error: " + e.getMessage());
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
```

## API

### `Message`

**`static Message decode(byte[] data) throws FFireException`**

Decode a `Message` from binary data.

- **Parameter:** `data` - Binary data (byte[])
- **Returns:** `Message` object
- **Throws:** `FFireException` if decoding fails

**`byte[] encode() throws FFireException`**

Encode this `Message` to binary data.

- **Returns:** Binary data (byte[])
- **Throws:** `FFireException` if encoding fails

**`void free()`**

Manually free the native resources. Called automatically by finalizer or when used with try-with-resources.

## Memory Management

This library implements `AutoCloseable`, so you can use try-with-resources:

```java
try (Message msg = Message.decode(data)) {
    // Use msg
} // Automatically freed
```

Alternatively, call `free()` manually or let the garbage collector handle it via the finalizer.

## Platform Support

Requires the appropriate native library for your platform:

- macOS: `libffire.dylib`
- Linux: `libffire.so`
- Windows: `ffire.dll`

## License

Generated by FFire. See your schema's license for terms.
